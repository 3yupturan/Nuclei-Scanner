name: SBOM Generator

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

permissions: read-all

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: SBOM Generator Action
      uses: advanced-security/sbom-generator-action@v0.0.1
      id: sbom
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

    - name: Upload SBOM Artifact
      uses: actions/upload-artifact@v2
      with:
        name: SBOM
        path: ${{ steps.sbom.outputs.fileName }}
